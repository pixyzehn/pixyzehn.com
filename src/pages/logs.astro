---
import PageLayout from '../layouts/PageLayout.astro';
import appsYaml from '../data/apps.yml?raw';
import citiesYaml from '../data/cities.yml?raw';
import countriesYaml from '../data/countries.yml?raw';
import japaneseMountainsYaml from '../data/japanese_mountains.yml?raw';
import japanesePrefecturesYaml from '../data/japanese_prefectures.yml?raw';
import mountaineeringYaml from '../data/mountaineering.yml?raw';
import qualificationsYaml from '../data/qualifications.yml?raw';
import { loadYaml } from '../utils/data';

const countries = loadYaml(countriesYaml);
const cities = loadYaml(citiesYaml);
const japanesePrefectures = loadYaml(japanesePrefecturesYaml);
const mountaineering = loadYaml(mountaineeringYaml);
const japaneseMountains = loadYaml(japaneseMountainsYaml);
const qualifications = loadYaml(qualificationsYaml);
const apps = loadYaml(appsYaml);

const sortedCountries = [...countries].sort((a, b) => a.name.localeCompare(b.name));
const sortedCities = [...cities].sort((a, b) => a.name.localeCompare(b.name));
const sortedPrefectures = [...japanesePrefectures].sort((a, b) => a.name.localeCompare(b.name));
const sortedMountains = [...japaneseMountains].sort((a, b) => a.name.localeCompare(b.name));
const recentMountaineeringItem = mountaineering[0];

const pluralize = (count, singular, plural) => (count === 1 ? singular : plural);
---
<PageLayout title="Logs">
  <p>Just another log for myself. Hopefully, it'll help me decide where to visit and what to focus on in the near future.</p>

  <hr>

  <h3>Travel</h3>

  <details>
    <summary>
      ğŸŒ I have visited roughly <b>{sortedCountries.length} / 195~</b>
      {pluralize(sortedCountries.length, 'country', 'countries')} (excluding Japan)
    </summary>
    {sortedCountries.map((country) => (
      <ul style="margin-top:0;margin-bottom:0;"><li>{country.name} {country.flag}</li></ul>
    ))}
  </details>

  <details>
    <summary>
      ğŸŒƒ I have visited roughly <b>{sortedCities.length} / 10,000~</b>
      {pluralize(sortedCities.length, 'city', 'cities')} (excluding cities in Japan)
    </summary>
    {sortedCities.map((city) => (
      <ul style="margin-top:0;margin-bottom:0;"><li>{city.name}, {city.country}</li></ul>
    ))}
  </details>

  <details>
    <summary>
      ğŸ—¾ I have visited roughly <b>{sortedPrefectures.length} / 47</b>
      {pluralize(sortedPrefectures.length, 'prefecture', 'prefectures')} in Japan
    </summary>
    {sortedPrefectures.map((prefecture) => (
      <ul style="margin-top:0;margin-bottom:0;"><li>{prefecture.name}</li></ul>
    ))}
  </details>

  <h3>Activities</h3>

  <details>
    <summary>
      ğŸ” I did <b>{recentMountaineeringItem.activities.length}</b> mountaineering
      {pluralize(recentMountaineeringItem.activities.length, 'activity', 'activities')} in
      {recentMountaineeringItem.year}
    </summary>
    {mountaineering.map((item) => (
      <>
        <p><b>{item.year}</b></p>
        <ul style="margin-top:0;margin-bottom:0;">
          {item.activities.map((activity) => (
            <li>
              {activity.flag} {activity.name}, {activity.category || '-'},
              {activity.altitude || '-'}, {activity.date || '-'}
              {activity.note ? (
                <blockquote><p>{activity.note}</p></blockquote>
              ) : null}
            </li>
          ))}
        </ul>
      </>
    ))}
  </details>

  <details>
    <summary>
      ğŸ—» I have climbed roughly <b>{sortedMountains.length} / 100</b> famous
      {pluralize(sortedMountains.length, 'mountain', 'mountains')} in Japan
      (<a href="https://en.wikipedia.org/wiki/100_Famous_Japanese_Mountains#List_by_region">Wikipedia</a>)
    </summary>
    {sortedMountains.map((mountain) => (
      <ul style="margin-top:0;margin-bottom:0;"><li>{mountain.name}, {mountain.area} ({mountain.altitude})</li></ul>
    ))}
  </details>

  <h3>Misc</h3>

  <details>
    <summary>
      ğŸ“– I got roughly <b>{qualifications.length}</b>
      {pluralize(qualifications.length, 'qualification', 'qualifications')}
    </summary>
    <ul style="margin-top:0;margin-bottom:0;">
      {qualifications.map((qualification) => (
        qualification.url ? (
          <li><a href={qualification.url}>{qualification.name}</a>, {qualification.date || '-'}</li>
        ) : (
          <li>{qualification.name}, {qualification.date || '-'}</li>
        )
      ))}
    </ul>
  </details>

  <details>
    <summary>ğŸ› ï¸ Past works <b>{apps.length}</b> apps</summary>
    <div class="app-icons">
      {apps.map((app) => (
        <img src={`/assets/app-icons/${app.name}.jpg`} width="50" height="50" alt={app.name}>
      ))}
    </div>
  </details>
</PageLayout>
